name: Test check run

on:
  check_run:
    types: [completed]

jobs:
  refresh-sat:
    runs-on: ubuntu-latest
    if: ${{ github.event.check_run.conclusion == 'success' && (github.event.check_run.name ==  '[test1] Build' || github.event.check_run.name ==  '[test2] Build') }}
    steps:
      - name: Get app name
        uses: actions-ecosystem/action-regex-match@v2
        id: app-name
        with:
          text: ${{ github.event.check_run.name }}
          regex: '\[(.*)\] Build'
          
      - name: Debug context values
        run: |
          echo "Nom du check run re√ßu : ${{ github.event.check_run.name }}"
          echo "Nom attendu pour ce job : [${{ steps.app-name.outputs.group1 }}] Build"
          echo "Nom commit github : ${{ github.sha }}"
          echo "Nom commit check_run : ${{ github.event.check_run.head_sha }}"
