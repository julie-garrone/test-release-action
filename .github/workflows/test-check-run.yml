name: Test check run

on:
  check_run:
    types: [completed]

jobs:
  refresh-sat:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        app_name: ["test1", "test2"]
    env:
      check_run_name: "[${{ matrix.app_name }}] Build"
    if: ${{ github.event.check_run.conclusion == 'success' && github.event.check_run.name ==  check_run_name }}
    steps:
      - name: Debug context values
        run: |
          echo "Nom du check run re√ßu : ${{ github.event.check_run.name }}"
          echo "Nom attendu pour ce job : [${{ matrix.app_name }}] Build"
          echo "Nom commit github : ${{ github.sha }}"
          echo "Nom commit check_run : ${{ github.event.check_run.head_sha }}"
